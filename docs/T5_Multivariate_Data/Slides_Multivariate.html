<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alan R. Vázquez">

<title>Datos de múltiples variables – IN2039 Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      IN2039 Data Visualization
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">IN2039 Data Visualization</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TEC-IN2039-Website.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#agenda" id="toc-agenda" class="nav-link active" data-scroll-target="#agenda">Agenda</a></li>
  <li><a href="#carguemos-las-librerías" id="toc-carguemos-las-librerías" class="nav-link" data-scroll-target="#carguemos-las-librerías">Carguemos las librerías</a></li>
  <li><a href="#datos-multivariados" id="toc-datos-multivariados" class="nav-link" data-scroll-target="#datos-multivariados">Datos multivariados</a></li>
  <li><a href="#ejemplo-1" id="toc-ejemplo-1" class="nav-link" data-scroll-target="#ejemplo-1">Ejemplo 1</a></li>
  <li><a href="#principio-1-formula-la-pregunta" id="toc-principio-1-formula-la-pregunta" class="nav-link" data-scroll-target="#principio-1-formula-la-pregunta">Principio 1: Formula la pregunta</a></li>
  <li><a href="#principio-2-convierte-los-datos-en-información" id="toc-principio-2-convierte-los-datos-en-información" class="nav-link" data-scroll-target="#principio-2-convierte-los-datos-en-información">Principio 2: Convierte los datos en información</a></li>
  <li><a href="#dos-variables-numéricas" id="toc-dos-variables-numéricas" class="nav-link" data-scroll-target="#dos-variables-numéricas">Dos variables numéricas</a>
  <ul class="collapse">
  <li><a href="#variable-independiente-y-dependiente" id="toc-variable-independiente-y-dependiente" class="nav-link" data-scroll-target="#variable-independiente-y-dependiente">Variable independiente y dependiente</a></li>
  <li><a href="#gráfica-de-dispersión" id="toc-gráfica-de-dispersión" class="nav-link" data-scroll-target="#gráfica-de-dispersión">Gráfica de dispersión</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  <li><a href="#principio-3-aplica-diseño-gráfico" id="toc-principio-3-aplica-diseño-gráfico" class="nav-link" data-scroll-target="#principio-3-aplica-diseño-gráfico">Principio 3: Aplica diseño gráfico</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  <li><a href="#posibles-formas-de-los-puntos" id="toc-posibles-formas-de-los-puntos" class="nav-link" data-scroll-target="#posibles-formas-de-los-puntos">Posibles formas de los puntos</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a></li>
  <li><a href="#incluir-el-cero" id="toc-incluir-el-cero" class="nav-link" data-scroll-target="#incluir-el-cero">Incluir el cero</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a></li>
  <li><a href="#gráficas-individuales" id="toc-gráficas-individuales" class="nav-link" data-scroll-target="#gráficas-individuales">Gráficas individuales</a></li>
  <li><a href="#gráfica-de-linea" id="toc-gráfica-de-linea" class="nav-link" data-scroll-target="#gráfica-de-linea">Gráfica de linea</a></li>
  <li><a href="#ejemplo-2" id="toc-ejemplo-2" class="nav-link" data-scroll-target="#ejemplo-2">Ejemplo 2</a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"></a></li>
  <li><a href="#aplicando-el-principio-3" id="toc-aplicando-el-principio-3" class="nav-link" data-scroll-target="#aplicando-el-principio-3">Aplicando el principio 3</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"></a></li>
  <li><a href="#tipos-de-linea" id="toc-tipos-de-linea" class="nav-link" data-scroll-target="#tipos-de-linea">Tipos de linea</a></li>
  </ul></li>
  <li><a href="#una-variable-categórica-y-una-numérica" id="toc-una-variable-categórica-y-una-numérica" class="nav-link" data-scroll-target="#una-variable-categórica-y-una-numérica">Una variable categórica y una numérica</a>
  <ul class="collapse">
  <li><a href="#divide-los-datos-en-grupos" id="toc-divide-los-datos-en-grupos" class="nav-link" data-scroll-target="#divide-los-datos-en-grupos">!Divide los datos en grupos!</a></li>
  <li><a href="#gráfica-de-cajas-por-grupos" id="toc-gráfica-de-cajas-por-grupos" class="nav-link" data-scroll-target="#gráfica-de-cajas-por-grupos">Gráfica de cajas por grupos</a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"></a></li>
  <li><a href="#aplicando-el-principio-3-1" id="toc-aplicando-el-principio-3-1" class="nav-link" data-scroll-target="#aplicando-el-principio-3-1">Aplicando el Principio 3</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"></a></li>
  <li><a href="#gráficando-resúmenes-estadísticos-por-grupos" id="toc-gráficando-resúmenes-estadísticos-por-grupos" class="nav-link" data-scroll-target="#gráficando-resúmenes-estadísticos-por-grupos">Gráficando resúmenes estadísticos por grupos</a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"></a></li>
  <li><a href="#gráfica-de-puntos-de-cleveland" id="toc-gráfica-de-puntos-de-cleveland" class="nav-link" data-scroll-target="#gráfica-de-puntos-de-cleveland">Gráfica de puntos de Cleveland</a></li>
  <li><a href="#mejorando-la-gráfica" id="toc-mejorando-la-gráfica" class="nav-link" data-scroll-target="#mejorando-la-gráfica">Mejorando la gráfica</a></li>
  <li><a href="#gráfica-de-barras" id="toc-gráfica-de-barras" class="nav-link" data-scroll-target="#gráfica-de-barras">Gráfica de barras</a></li>
  <li><a href="#section-10" id="toc-section-10" class="nav-link" data-scroll-target="#section-10"></a></li>
  </ul></li>
  <li><a href="#dos-variables-categóricas" id="toc-dos-variables-categóricas" class="nav-link" data-scroll-target="#dos-variables-categóricas">Dos variables categóricas</a>
  <ul class="collapse">
  <li><a href="#divide-los-datos-en-grupos-1" id="toc-divide-los-datos-en-grupos-1" class="nav-link" data-scroll-target="#divide-los-datos-en-grupos-1">!Divide los datos en grupos!</a></li>
  <li><a href="#ejemplo-3" id="toc-ejemplo-3" class="nav-link" data-scroll-target="#ejemplo-3">Ejemplo 3</a></li>
  <li><a href="#section-11" id="toc-section-11" class="nav-link" data-scroll-target="#section-11"></a></li>
  <li><a href="#gráfica-de-barras-apiladas" id="toc-gráfica-de-barras-apiladas" class="nav-link" data-scroll-target="#gráfica-de-barras-apiladas">Gráfica de barras apiladas</a></li>
  <li><a href="#section-12" id="toc-section-12" class="nav-link" data-scroll-target="#section-12"></a></li>
  <li><a href="#gráfica-de-barras-lado-a-lado" id="toc-gráfica-de-barras-lado-a-lado" class="nav-link" data-scroll-target="#gráfica-de-barras-lado-a-lado">Gráfica de barras lado a lado</a></li>
  <li><a href="#section-13" id="toc-section-13" class="nav-link" data-scroll-target="#section-13"></a></li>
  <li><a href="#apiladas-o-lado-a-lado" id="toc-apiladas-o-lado-a-lado" class="nav-link" data-scroll-target="#apiladas-o-lado-a-lado">¿Apiladas o lado a lado?</a></li>
  <li><a href="#section-14" id="toc-section-14" class="nav-link" data-scroll-target="#section-14"></a></li>
  <li><a href="#resúmenes-estadísticos" id="toc-resúmenes-estadísticos" class="nav-link" data-scroll-target="#resúmenes-estadísticos">Resúmenes estadísticos</a></li>
  <li><a href="#section-15" id="toc-section-15" class="nav-link" data-scroll-target="#section-15"></a></li>
  </ul></li>
  <li><a href="#más-de-una-variable" id="toc-más-de-una-variable" class="nav-link" data-scroll-target="#más-de-una-variable">Más de una variable</a>
  <ul class="collapse">
  <li><a href="#gráficas-para-tres-variables" id="toc-gráficas-para-tres-variables" class="nav-link" data-scroll-target="#gráficas-para-tres-variables">Gráficas para tres variables</a></li>
  <li><a href="#gráfica-de-dispersión-por-color" id="toc-gráfica-de-dispersión-por-color" class="nav-link" data-scroll-target="#gráfica-de-dispersión-por-color">Gráfica de dispersión por color</a></li>
  <li><a href="#gráfica-de-facetas-o-enrejado" id="toc-gráfica-de-facetas-o-enrejado" class="nav-link" data-scroll-target="#gráfica-de-facetas-o-enrejado">Gráfica de facetas o enrejado</a></li>
  <li><a href="#section-16" id="toc-section-16" class="nav-link" data-scroll-target="#section-16"></a></li>
  <li><a href="#section-17" id="toc-section-17" class="nav-link" data-scroll-target="#section-17"></a></li>
  <li><a href="#gráficas-de-varias-líneas" id="toc-gráficas-de-varias-líneas" class="nav-link" data-scroll-target="#gráficas-de-varias-líneas">Gráficas de varias líneas</a></li>
  <li><a href="#el-formato-requerido" id="toc-el-formato-requerido" class="nav-link" data-scroll-target="#el-formato-requerido">El formato requerido</a></li>
  <li><a href="#una-nueva-librería-tidyr" id="toc-una-nueva-librería-tidyr" class="nav-link" data-scroll-target="#una-nueva-librería-tidyr">Una nueva librería: tidyr</a></li>
  <li><a href="#section-18" id="toc-section-18" class="nav-link" data-scroll-target="#section-18"></a></li>
  <li><a href="#section-19" id="toc-section-19" class="nav-link" data-scroll-target="#section-19"></a></li>
  <li><a href="#section-20" id="toc-section-20" class="nav-link" data-scroll-target="#section-20"></a></li>
  <li><a href="#gráfica-de-area" id="toc-gráfica-de-area" class="nav-link" data-scroll-target="#gráfica-de-area">Gráfica de area</a></li>
  <li><a href="#aplicando-el-principio-3-2" id="toc-aplicando-el-principio-3-2" class="nav-link" data-scroll-target="#aplicando-el-principio-3-2">Aplicando el Principio 3</a></li>
  <li><a href="#gráficas-para-cuatro-variables" id="toc-gráficas-para-cuatro-variables" class="nav-link" data-scroll-target="#gráficas-para-cuatro-variables">Gráficas para cuatro variables</a></li>
  <li><a href="#section-21" id="toc-section-21" class="nav-link" data-scroll-target="#section-21"></a></li>
  </ul></li>
  <li><a href="#más-gráficas" id="toc-más-gráficas" class="nav-link" data-scroll-target="#más-gráficas">Más gráficas</a></li>
  <li><a href="#regresar-a-página-principal" id="toc-regresar-a-página-principal" class="nav-link" data-scroll-target="#regresar-a-página-principal">Regresar a página principal</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Slides_Multivariate.slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Datos de múltiples variables</h1>
<p class="subtitle lead">IN2039: Visualización de Datos</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Alan R. Vázquez </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Departamento de Ingeniería Industrial
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="agenda" class="level3">
<h3 class="anchored" data-anchor-id="agenda">Agenda</h3>
<ol type="1">
<li><p>Datos de más de una variable</p></li>
<li><p>Dos variables numéricas</p></li>
<li><p>Una variable numérica y una categórica</p></li>
<li><p>Dos variables categóricas</p></li>
<li><p>Tres o más variables</p></li>
</ol>
</section>
<section id="carguemos-las-librerías" class="level3">
<h3 class="anchored" data-anchor-id="carguemos-las-librerías">Carguemos las librerías</h3>
<p>Carguémos las librerías <code>readxl</code>, <code>ggplot2</code>, <code>ggformula</code>, y <code>dplyr</code> en Google Colab y R antes de comenzar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nos se te olvide instalar la librería "ggformula" en Google Colab.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("ggformula")</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="datos-multivariados" class="level3">
<h3 class="anchored" data-anchor-id="datos-multivariados">Datos multivariados</h3>
<p>Los datos multivariados son conjunto de datos que contienen observaciones de dos o más variables.</p>
<div class="incremental">
<ul class="incremental">
<li><p>Las variables pueden ser numéricas o categóricas.</p></li>
<li><p>Las variables pueden o no depender las unas de las otras.</p></li>
</ul>
</div>
<p>. . .</p>
<p>De hecho, el <strong>objetivo</strong> es establecer si hay alguna relación entre las variables, así como el tipo de relación.</p>
</section>
<section id="ejemplo-1" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-1">Ejemplo 1</h3>
<p>Consideremos datos de 392 autos sobre sus millas por galón, número de cilindros, caballos de fuerza, peso, aceleración, año, origen, entre otras variables.</p>
<p>Los datos están en el archivo “auto_dataset.xlsx”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>auto_data <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">"auto_dataset.xlsx"</span>) </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>auto_data <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
    mpg cylinders displacement horsepower weight acceleration  year origin  
  &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   
1    18         8          307 130          3504         12      70 American
2    15         8          350 165          3693         11.5    70 American
3    18         8          318 150          3436         11      70 American
4    16         8          304 150          3433         12      70 American
5    17         8          302 140          3449         10.5    70 American
6    15         8          429 198          4341         10      70 American
# ℹ 1 more variable: `car name` &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="principio-1-formula-la-pregunta" class="level3">
<h3 class="anchored" data-anchor-id="principio-1-formula-la-pregunta">Principio 1: Formula la pregunta</h3>
<p>En el contexto de datos de múltiples variables, las preguntas típicas a estudiar son:</p>
<div class="incremental">
<ul class="incremental">
<li><p>¿Cómo se relacionan la variable <span class="math inline">\(X\)</span> y la variable <span class="math inline">\(Y\)</span>?</p></li>
<li><p>¿Es la distribución de la variable <span class="math inline">\(X\)</span> la misma en todos los subgrupos definidos por la variable <span class="math inline">\(Z\)</span>?</p></li>
<li><p>¿Hay alguna observación inusual en la combinación de valores de las variables <span class="math inline">\(X\)</span> y <span class="math inline">\(Y\)</span>?</p></li>
<li><p>¿Hay alguna observación inusual en <span class="math inline">\(X\)</span> para un subgrupo de la variable <span class="math inline">\(Z\)</span>?</p></li>
</ul>
</div>
</section>
<section id="principio-2-convierte-los-datos-en-información" class="level3">
<h3 class="anchored" data-anchor-id="principio-2-convierte-los-datos-en-información">Principio 2: Convierte los datos en información</h3>
<p>Existen varios tipos de gráficas que nos ayudan a explorar relaciones entre dos o más variables.</p>
<div class="center">
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Tipo</th>
<th style="text-align: left;">Gráfica</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Numéricas</td>
<td style="text-align: left;">Gráfica de dispersión, gráfico de lineas</td>
</tr>
<tr class="even">
<td style="text-align: left;">Categóricas</td>
<td style="text-align: left;">Gráfica de barras lado a lado, gráfico de barras apiladas</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Mixta</td>
<td style="text-align: left;">Gráfica de caja una al lado de la otro, gráfica de burbujas</td>
</tr>
</tbody>
</table>
</div>
<div class="notes">
<p>For two features, the combination of types (both quantitative, both qualitative, or a mix) matters.</p>
</div>
</section>
<section id="dos-variables-numéricas" class="level2">
<h2 class="anchored" data-anchor-id="dos-variables-numéricas">Dos variables numéricas</h2>
<section id="variable-independiente-y-dependiente" class="level3">
<h3 class="anchored" data-anchor-id="variable-independiente-y-dependiente">Variable independiente y dependiente</h3>
<p>Cuando investigamos la relación entre dos variables (numéricas o categóricas), tenemos una nomenclatura específica para cada una de ellas.</p>
<p>. . .</p>
<p>Llamamos a una variable como la <em>variable dependiente</em> o de <em>respuesta</em>, denotandola con la letra <span class="math inline">\(Y\)</span>.</p>
<p>. . .</p>
<p>La otra variable la llamamos variable <em>independendiente</em> o <em>predictor</em>, denotandola con la letra <span class="math inline">\(X\)</span>.</p>
<p>. . .</p>
<blockquote class="blockquote">
<p>Nuestro objetivo es saber si cambios en la variable <span class="math inline">\(X\)</span> están asociados a cambios en la variable <span class="math inline">\(Y\)</span>, y el tipo de asociación.</p>
</blockquote>
</section>
<section id="gráfica-de-dispersión" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-dispersión">Gráfica de dispersión</h3>
<p>La gráfica más común para examinar la relación entre dos variables numéricas es la <span style="color:#174062;"><strong><em>gráfica de dispersión</em></strong></span>.</p>
<p>. . .</p>
<p>Las variables <span class="math inline">\(X\)</span> y <span class="math inline">\(Y\)</span> se colocan en el eje horizontal y vertical, respectivamente. Cada punto en la gráfica marca la posición de un par de valores de <span class="math inline">\(X\)</span> y <span class="math inline">\(Y\)</span>.</p>
<p>. . .</p>
<blockquote class="blockquote">
<p>El objetivo es explorar relaciones lineales o no lineales entre las variables.</p>
</blockquote>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
<p>Para construir gráficas de dispersión, usamos la función <code>gf_point(Y ~ X, data = data_set)</code>.</p>
<p>. . .</p>
<p>Por ejemplo, construyamos una gráfica para explorar la relación entre el peso de un auto (<code>weight</code>) y sus rendimiento en millas por galón (<code>mpg</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1"></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-4-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="principio-3-aplica-diseño-gráfico" class="level3">
<h3 class="anchored" data-anchor-id="principio-3-aplica-diseño-gráfico">Principio 3: Aplica diseño gráfico</h3>
<p>Siguiendo el principio 3, podemos cambiar los valores pre-establecidos de la función para definir colores o formas diferentes de los puntos de la gráfica.</p>
<p>Específicamente, puedes cambiar el color, la forma, y el tamaño de los puntos usando los argumentos <code>color</code>, <code>shape</code> y <code>size</code>, respectivamente.</p>
<p><br></p>
<p><code>gf_point(Y ~ X, data = data_set, color, shape, size)</code></p>
</section>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2"></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data, <span class="at">color =</span> <span class="st">"blue"</span>, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-5-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="posibles-formas-de-los-puntos" class="level3">
<h3 class="anchored" data-anchor-id="posibles-formas-de-los-puntos">Posibles formas de los puntos</h3>
<p>Para alterar los símbolos que denotan los puntos en una gráifca de dispersión, fijamos el parametro <code>shape</code> a algún número o caracter mostrado abajo.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/FIG-SCATTER-SHAPES-CHART-1.png" class="quarto-figure quarto-figure-center figure-img" width="530" height="344"></p>
</figure>
</div>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3"></h3>
<p>Siguiendo con el principio 3, puedes usar funciones antes vistas para mejorar aún más la apariencia del gráfico.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mi_diagrama <span class="ot">=</span> <span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data, <span class="at">color =</span> <span class="st">"darkblue"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">linetype =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Relación de peso y millas por galón en autos"</span>, <span class="at">x =</span> <span class="st">"Peso (lb)"</span>, <span class="at">y =</span> <span class="st">"Millas por galón"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>mi_diagrama <span class="ot">=</span> mi_diagrama <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">25</span>)) </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>mi_diagrama </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-6-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="incluir-el-cero" class="level3">
<h3 class="anchored" data-anchor-id="incluir-el-cero">Incluir el cero</h3>
<p>En la gráfica anterior, el valor mínimo del eje vertical está alrededor de 10. Para ajustar el valor mínimo en ese eje a 0 usamos el comando adicional mostrado abajo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mi_diagrama <span class="ot">=</span> mi_diagrama <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>mi_diagrama</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-7-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4"></h3>
<p>De ser necesario, también podemos ajustar el eje horizontal para mostrar el 0 también.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mi_diagrama <span class="sc">+</span> <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5500</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-8-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficas-individuales" class="level3">
<h3 class="anchored" data-anchor-id="gráficas-individuales">Gráficas individuales</h3>
<p>Las gráficas individuales de variables (como el histograma) no permiten estudiar la relación entre dos variables. Solo dan información de la <em>distribución</em> cada variable.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>histogram_mpg <span class="ot">=</span> <span class="fu">gf_histogram</span>( <span class="sc">~</span> mpg, <span class="at">data =</span> auto_data, <span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>histogram_mpg <span class="ot">=</span> histogram_mpg <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de milas por galón"</span>, <span class="at">x =</span> <span class="st">"Millas por galón"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>histogram_mpg <span class="ot">=</span> histogram_mpg <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">25</span>))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>histogram_mpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-9-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>histogram_weight <span class="ot">=</span> <span class="fu">gf_histogram</span>( <span class="sc">~</span> weight, <span class="at">data =</span> auto_data, <span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>histogram_weight <span class="ot">=</span> histogram_weight <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de peso"</span>, <span class="at">x =</span> <span class="st">"Peso (lb)"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>histogram_weight <span class="ot">=</span> histogram_weight <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">25</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>histogram_weight</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-10-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="gráfica-de-linea" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-linea">Gráfica de linea</h3>
<p>Una gráfica de línea es una representación visual de datos en la que puntos de datos están conectados por una línea. Ejes:</p>
<ul>
<li><span class="math inline">\(X\)</span> (horizontal): Representa el tiempo o la variable independiente.</li>
<li><span class="math inline">\(Y\)</span> (vertical): Representa la variable dependiente.</li>
</ul>
<p>Cada punto representa un valor en un momento dado.</p>
<p>. . .</p>
<blockquote class="blockquote">
<p>El objetivo es explorar tendencias a lo largo del tiempo o la evolución de una variable continua.</p>
</blockquote>
</section>
<section id="ejemplo-2" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-2">Ejemplo 2</h3>
<p>Considera los datos en el archivo “spotify.xlsx”. El conjunto de datos de este contiene las reproducciones diarias globales de las cinco canciones más populares en el servicio de transmisión de música Spotify en el 2017.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>spotify_data <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">"spotify.xlsx"</span>) </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>spotify_data <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  Date                  Day `Shape of You` Despacito `Something Just Like This`
  &lt;dttm&gt;              &lt;dbl&gt;          &lt;dbl&gt;     &lt;dbl&gt;                      &lt;dbl&gt;
1 2017-01-06 00:00:00     1       12287078        NA                         NA
2 2017-01-07 00:00:00     2       13190270        NA                         NA
3 2017-01-08 00:00:00     3       13099919        NA                         NA
# ℹ 2 more variables: HUMBLE. &lt;dbl&gt;, Unforgettable &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-5" class="level3">
<h3 class="anchored" data-anchor-id="section-5"></h3>
<p>Nos enfocaremos en la canción <em>Despacito</em> de Luis Fonsi. Para construir gráficas de dispersión, usamos la función <code>gf_line(Y ~ X, data = data_set)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_line</span>(Despacito <span class="sc">~</span> Date, <span class="at">data =</span> spotify_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="aplicando-el-principio-3" class="level3">
<h3 class="anchored" data-anchor-id="aplicando-el-principio-3">Aplicando el principio 3</h3>
<p>Podemos cambiar varios aspectos de la gráfica usando argumentos adicionales <code>linetype</code>, <code>size</code>, y <code>color</code>.</p>
<p><br></p>
<p><code>gf_line(Y ~ X, linetype, size, color, data = data_set)</code>.</p>
</section>
<section id="section-6" class="level3">
<h3 class="anchored" data-anchor-id="section-6"></h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>mi_linea <span class="ot">=</span> <span class="fu">gf_line</span>(Despacito <span class="sc">~</span> Date, <span class="at">data =</span> spotify_data, <span class="at">color =</span> <span class="st">"darkblue"</span>, <span class="at">size =</span> <span class="fl">1.3</span>) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Popularidad de la canción despacito de Luis Fonsi"</span>, <span class="at">x =</span> <span class="st">"Fecha"</span>, <span class="at">y =</span> <span class="st">"Número de reproducciones en Spotify"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>mi_linea <span class="ot">=</span> mi_linea <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">18</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                                <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">25</span>)) </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>mi_linea</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="tipos-de-linea" class="level3">
<h3 class="anchored" data-anchor-id="tipos-de-linea">Tipos de linea</h3>
<p>Para cambiar el tipo de linea, fijamos el parametro <code>linetype</code> a algún número o palabra mostrada abajo.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/clipboard-2759814636.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="una-variable-categórica-y-una-numérica" class="level2">
<h2 class="anchored" data-anchor-id="una-variable-categórica-y-una-numérica">Una variable categórica y una numérica</h2>
<section id="divide-los-datos-en-grupos" class="level3">
<h3 class="anchored" data-anchor-id="divide-los-datos-en-grupos">!Divide los datos en grupos!</h3>
<p>Para examinar la relación entre una variable numérica y una categórica, usamos la variable categórica para dividir los datos en grupos. Así <strong>comparamos la distribución</strong> de la variable numérica entre estos grupos.</p>
<p>. . .</p>
<p>En este contexto:</p>
<ul>
<li><span class="math inline">\(X\)</span> es la variable categórica.</li>
<li><span class="math inline">\(Y\)</span> es la variable numérica.</li>
</ul>
<p>. . .</p>
<p>La <span style="color:#D70040;">gráfica de cajas lado al lado</span> es la más efectiva para estudiar la relación entre una variable categórica y una numérica.</p>
</section>
<section id="gráfica-de-cajas-por-grupos" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-cajas-por-grupos">Gráfica de cajas por grupos</h3>
<p>La gráfica de cajas lado a lado compara la distribución de una variable en diferentes grupos.</p>
<p><br></p>
<p>La gráfica se obtiene con la función</p>
<p><code>gf_boxplot(Y ~ X, data = dataset)</code>.</p>
</section>
<section id="section-7" class="level3">
<h3 class="anchored" data-anchor-id="section-7"></h3>
<p>Por ejemplo, si queremos comparar las distribuciones de las millas por galón de los autos construídos en America, Europa, o Japón, usamos el siguiente comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_boxplot</span>(mpg <span class="sc">~</span> origin, <span class="at">data =</span> auto_data) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-14-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="aplicando-el-principio-3-1" class="level3">
<h3 class="anchored" data-anchor-id="aplicando-el-principio-3-1">Aplicando el Principio 3</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> <span class="fu">gf_boxplot</span>(mpg <span class="sc">~</span> origin, <span class="at">data =</span> auto_data, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> bp_mpg_by_origin <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Millas por galón"</span>, <span class="at">x =</span> <span class="st">"Origen"</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> bp_mpg_by_origin <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-15-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-8" class="level3">
<h3 class="anchored" data-anchor-id="section-8"></h3>
<p>También, podemos cambiar el formato de los puntos atípicos usando los argumentos <code>outlier.color</code>, <code>outlier.shape</code>, y <code>outlier.size</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> <span class="fu">gf_boxplot</span>(mpg <span class="sc">~</span> origin, <span class="at">data =</span> auto_data, <span class="at">fill =</span> <span class="st">"lightblue"</span>, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">outlier.color =</span> <span class="st">"red"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">outlier.shape =</span> <span class="dv">4</span>, <span class="at">outlier.size =</span> <span class="dv">4</span>) </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> bp_mpg_by_origin <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Millas por galón"</span>, <span class="at">x =</span> <span class="st">"Origen"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin <span class="ot">=</span> bp_mpg_by_origin <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>bp_mpg_by_origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-16-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficando-resúmenes-estadísticos-por-grupos" class="level3">
<h3 class="anchored" data-anchor-id="gráficando-resúmenes-estadísticos-por-grupos">Gráficando resúmenes estadísticos por grupos</h3>
<p>Alternativamente, podemos resumir los valores de la variable numérica <span class="math inline">\(Y\)</span> para cada categoría de la variable <span class="math inline">\(X\)</span> usando la mediana o el promedio.</p>
<p>Por ejemplo, gráfiquemos el promedio de millas por galón de los autos producidos en America, Europa, y Japón. Para esto, primero calculamos el promedio por cada categoría usando <code>group_by()</code> y <code>summarise()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>resumen_autos <span class="ot">=</span> auto_data <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">"Promedio.mpg"</span> <span class="ot">=</span> <span class="fu">mean</span>(mpg))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-9" class="level3">
<h3 class="anchored" data-anchor-id="section-9"></h3>
<p>Los datos a graficar son:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>resumen_autos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  origin   Promedio.mpg
  &lt;chr&gt;           &lt;dbl&gt;
1 American         20.1
2 European         27.9
3 Japanese         30.5</code></pre>
</div>
</div>
<p>Dos tipos de visualizaciones comúnes para graficar una variable numérica y una discreta cuando cada solo hay un valor de la variable categorica por categoría son:</p>
<ul>
<li>Gráfica de puntos de Cleveland</li>
<li>Gráfica de barras</li>
</ul>
</section>
<section id="gráfica-de-puntos-de-cleveland" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-puntos-de-cleveland">Gráfica de puntos de Cleveland</h3>
<p>La gráfica de puntos de Cleveland codifica datos cuantitativos en distintas categorías. Es una alternativa a un gráfico de barras. Se obtiene con la función <code>gf_point()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(origin <span class="sc">~</span> Promedio.mpg, <span class="at">data =</span> resumen_autos) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-19-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mejorando-la-gráfica" class="level3">
<h3 class="anchored" data-anchor-id="mejorando-la-gráfica">Mejorando la gráfica</h3>
<p>Aplicamos el Principio 3 mejorar la gráfica.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(origin <span class="sc">~</span> Promedio.mpg, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">color =</span> <span class="st">"pink"</span>, <span class="at">data =</span> resumen_autos) <span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Origen"</span>, <span class="at">x =</span> <span class="st">"Promedio de Millas por Galón"</span>, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Comparación de autos de diferences regiones"</span>) <span class="sc">+</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">35</span>)) <span class="sc">+</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-20-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfica-de-barras" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-barras">Gráfica de barras</h3>
<p>Para hacer una gráfica de barras donde la longitud de la barra sea igual a un valor específico, usamos la función <code>gf_col()</code> de la librería <strong>ggformula</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_col</span>(origin <span class="sc">~</span> Promedio.mpg, <span class="at">data =</span> resumen_autos) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-21-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-10" class="level3">
<h3 class="anchored" data-anchor-id="section-10"></h3>
<p>Podemos usar comandos similares a la gráfica de puntos de Cleveland para mejorar la gráfica de barras.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_col</span>(origin <span class="sc">~</span> Promedio.mpg, <span class="at">fill =</span> <span class="st">"pink"</span>, <span class="at">data =</span> resumen_autos) <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Origen"</span>, <span class="at">x =</span> <span class="st">"Promedio de Millas por Galón"</span>, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Comparación de autos de diferences regiones"</span>) <span class="sc">+</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-22-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="dos-variables-categóricas" class="level2">
<h2 class="anchored" data-anchor-id="dos-variables-categóricas">Dos variables categóricas</h2>
<section id="divide-los-datos-en-grupos-1" class="level3">
<h3 class="anchored" data-anchor-id="divide-los-datos-en-grupos-1">!Divide los datos en grupos!</h3>
<p>Con dos variables categóricas, comparamos la distribución de una variable entre subgrupos definidos por la otra variable.</p>
<p>De hecho, mantenemos constante una variable y trazamos la distribución de la otra.</p>
<p>. . .</p>
<p>Para hacer esto, los gráficos más populares son una extensión de las gráficas de barras:</p>
<ul>
<li>Gráficas de barras apiladas</li>
<li>Gráficas de barras lado al lado</li>
</ul>
</section>
<section id="ejemplo-3" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-3">Ejemplo 3</h3>
<p>Como ejemplo, consideremos los datos en el archivo “penguins.xlsx”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">"penguins.xlsx"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;chr&gt;   &lt;chr&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
5 Adelie  Torgersen           36.7          19.3               193        3450
6 Adelie  Torgersen           39.3          20.6               190        3650
# ℹ 2 more variables: sex &lt;chr&gt;, year &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-11" class="level3">
<h3 class="anchored" data-anchor-id="section-11"></h3>
<p>Los datos tienen dos variables categóricas:</p>
<ul>
<li>La especie de pingüinos (<code>species</code>).</li>
<li>La isla de donde provienen (<code>island</code>).</li>
</ul>
<p>¡Asegúrate que sean especificados como <code>factor</code> en R!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="ot">=</span> penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"species"</span>, <span class="st">"island"</span>, <span class="st">"sex"</span>), as.factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="gráfica-de-barras-apiladas" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-barras-apiladas">Gráfica de barras apiladas</h3>
<p>La gráfica de barras lado al lado se genera con la función <code>gf_bar()</code>, asignando la variable <span class="math inline">\(X\)</span> al argumento <code>fill</code>.</p>
<p>El nombre de la variable debe de estar precedido por una tilde <code>~X</code>.</p>
<p><br></p>
<p>. . .</p>
<p>Por ejemplo, para estudiar la distribución de las especies de pingüinos en las tres diferentes islas usamos lo siguiente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_bar</span>( <span class="sc">~</span> species, <span class="at">data =</span> penguins_data, <span class="at">fill =</span> <span class="sc">~</span>island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-12" class="level3">
<h3 class="anchored" data-anchor-id="section-12"></h3>
<p>La gráfica muestra la frecuencia de cada especie, separada por el nombre de la isla.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_bar</span>( <span class="sc">~</span> species, <span class="at">fill =</span> <span class="sc">~</span>island, <span class="at">data =</span> penguins_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-26-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfica-de-barras-lado-a-lado" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-barras-lado-a-lado">Gráfica de barras lado a lado</h3>
<p>Una alternativa a la gráfica anterior es poner las barras lado al lado para las categorías de la variable <span class="math inline">\(X\)</span>.</p>
<p>En este caso, se usan los mismos comandos con un argumento extra: <code>position = position_dodge()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_bar</span>( <span class="sc">~</span> species, <span class="at">fill =</span> <span class="sc">~</span>island, </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> penguins_data, <span class="at">position =</span> <span class="fu">position_dodge</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-13" class="level3">
<h3 class="anchored" data-anchor-id="section-13"></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_bar</span>( <span class="sc">~</span> species, <span class="at">data =</span> penguins_data, </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="sc">~</span>island, <span class="at">position =</span> <span class="fu">position_dodge</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-28-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="apiladas-o-lado-a-lado" class="level3">
<h3 class="anchored" data-anchor-id="apiladas-o-lado-a-lado">¿Apiladas o lado a lado?</h3>
<p>La principal diferencia entre los gráficos de barras apiladas y de lado a lado es que el gráfico de lado a lado muestra los valores en barras separadas dentro de una categoría.</p>
<p>Ventajas de barras <strong>apiladas</strong>:</p>
<ul>
<li><p>Es más fácil entender qué proporciones de un todo se dividen entre segmentos.</p></li>
<li><p>Agrega visualmente cada proporción.</p></li>
</ul>
</section>
<section id="section-14" class="level3">
<h3 class="anchored" data-anchor-id="section-14"></h3>
<p>Ventajas de barras <strong>lado a lado</strong>:</p>
<ul>
<li><p>Es más fácil comparar las alturas de cada entidad individual.</p></li>
<li><p>Mejor para comparar entre grupos.</p></li>
</ul>
</section>
<section id="resúmenes-estadísticos" class="level3">
<h3 class="anchored" data-anchor-id="resúmenes-estadísticos">Resúmenes estadísticos</h3>
<p>Para variables categóricas, los resúmenes estadísticos más comunes son la frecuencia y la frecuencia relativa.</p>
<p>Con <strong>dplyr</strong>, calculamos la frecuencia usando la función <code>count()</code>, que cuenta los valores únicos de una o más variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> <span class="fu">count</span>(island, species) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   island [3]
  island    species       n
  &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;
1 Biscoe    Adelie       44
2 Biscoe    Gentoo      124
3 Dream     Adelie       56
4 Dream     Chinstrap    68
5 Torgersen Adelie       52</code></pre>
</div>
</div>
</section>
<section id="section-15" class="level3">
<h3 class="anchored" data-anchor-id="section-15"></h3>
<p>Para calcular la frecuencia relativa, usamos <code>mutate()</code> junto con la función <code>prop.table()</code>, que calcula las proporciones de una columna.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>tabla.resumen <span class="ot">=</span> penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(island, species) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(island) </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>tabla.resumen <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">"Proporción"</span> <span class="ot">=</span> <span class="fu">prop.table</span>(n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
# Groups:   island [3]
  island    species       n Proporción
  &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;      &lt;dbl&gt;
1 Biscoe    Adelie       44      0.262
2 Biscoe    Gentoo      124      0.738
3 Dream     Adelie       56      0.452
4 Dream     Chinstrap    68      0.548
5 Torgersen Adelie       52      1    </code></pre>
</div>
</div>
</section>
</section>
<section id="más-de-una-variable" class="level2">
<h2 class="anchored" data-anchor-id="más-de-una-variable">Más de una variable</h2>
<section id="gráficas-para-tres-variables" class="level3">
<h3 class="anchored" data-anchor-id="gráficas-para-tres-variables">Gráficas para tres variables</h3>
<ul>
<li><p>Cuando examinamos una distribución o relación, a menudo queremos compararla entre subgrupos de datos.</p></li>
<li><p>Este proceso de condicionamiento sobre variables adicionales conduce a visualizaciones que involucran tres o más variables.</p></li>
<li><p>Aquí explicamos cómo crear gráficas para visualizar múltiples variables.</p></li>
</ul>
</section>
<section id="gráfica-de-dispersión-por-color" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-dispersión-por-color">Gráfica de dispersión por color</h3>
<p>Para dos variables numéricas y una categórica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">color =</span> <span class="sc">~</span>origin, <span class="at">data =</span> auto_data) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-31-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfica-de-facetas-o-enrejado" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-facetas-o-enrejado">Gráfica de facetas o enrejado</h3>
<p>La gráfica de facetas visualiza la relación o distribución de una o dos variables para cada subgrupo definido por una tercera variable <span class="math inline">\(Z\)</span>.</p>
<p>. . .</p>
<p><strong>Idea:</strong> Crear una gráfica para cada subgrupo de <span class="math inline">\(Z\)</span>.</p>
<p>. . .</p>
<p>Para hacer la gráfica, usa la función <code>gf_facet_grid</code> con la siguiente sintaxis:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data) <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_facet_grid</span>(origin <span class="sc">~</span> .) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-16" class="level3">
<h3 class="anchored" data-anchor-id="section-16"></h3>
<p>La función produce una rejilla con 1 columna y 3 filas de gráficas. Cada fila acomoda una categoría de <code>origin</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data) <span class="sc">%&gt;%</span> <span class="fu">gf_facet_grid</span>(origin <span class="sc">~</span> .) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-33-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-17" class="level3">
<h3 class="anchored" data-anchor-id="section-17"></h3>
<p>Si cambiamos el orden de la variable <code>origin</code> en la función <code>gf_facet_grid</code>, obtenemos una rejilla de gráficas con tres columnas y una fila de gráficas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(mpg <span class="sc">~</span> weight, <span class="at">data =</span> auto_data) <span class="sc">%&gt;%</span> <span class="fu">gf_facet_grid</span>( <span class="sc">~</span> origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-34-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficas-de-varias-líneas" class="level3">
<h3 class="anchored" data-anchor-id="gráficas-de-varias-líneas">Gráficas de varias líneas</h3>
<p>Podemos utilizar las funciones <code>gf_line()</code> y <code>gf_facet_grid()</code> para visualizar la evolución de las reproducciones de las 5 canciones en el archivo “spotify.xlsx” a través del tiempo.</p>
<p><br></p>
<p>Sin embargo, requerimos manipular los datos para obtener el formato requerido por estas funciones.</p>
</section>
<section id="el-formato-requerido" class="level3">
<h3 class="anchored" data-anchor-id="el-formato-requerido">El formato requerido</h3>
<p>En el formato para una gráfica de varias, necesitamos juntar las columnas <code>Shape of You</code>, <code>Despacito</code>, <code>Something Just Like This</code>, <code>HUMBLE</code> y <code>Unforgettable</code> en dos columnas.</p>
<p>Una columna contendrá el número de reproducciones y la otra el título de la canción.</p>
<p>Ambas columnas estarán ordenadas por la variable <code>Date</code>.</p>
</section>
<section id="una-nueva-librería-tidyr" class="level3">
<h3 class="anchored" data-anchor-id="una-nueva-librería-tidyr">Una nueva librería: tidyr</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/tidyverse.jpeg" class="quarto-figure quarto-figure-center figure-img" width="491" height="374"></p>
</figure>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p><strong>tidyr</strong> permite remodelar y reagrupar un conjunto de datos.</p></li>
<li><p>Es parte de una colección de paquetes de ciencia de datos llamado <em>tidyverse</em>.</p></li>
<li><p><a href="https://tidyr.tidyverse.org/" class="uri">https://tidyr.tidyverse.org/</a></p></li>
</ul>
</div>
</div>
<p>Cárgala en Google Colab con el siguiente código.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-18" class="level3">
<h3 class="anchored" data-anchor-id="section-18"></h3>
<p>Para hacer el formateo necesario, usamos la función <code>pivot_longer()</code> de la librería <strong>tidyr</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>data_lines <span class="ot">=</span> spotify_data <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(<span class="st">"Shape of You"</span>, <span class="st">"Despacito"</span>, <span class="st">"Something Just Like This"</span>, </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"HUMBLE."</span>, <span class="st">"Unforgettable"</span>), </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Cancion"</span>, </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Reproducciones"</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>data_lines <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Date                  Day Cancion                  Reproducciones
  &lt;dttm&gt;              &lt;dbl&gt; &lt;chr&gt;                             &lt;dbl&gt;
1 2017-01-06 00:00:00     1 Shape of You                   12287078
2 2017-01-06 00:00:00     1 Despacito                            NA
3 2017-01-06 00:00:00     1 Something Just Like This             NA
4 2017-01-06 00:00:00     1 HUMBLE.                              NA
5 2017-01-06 00:00:00     1 Unforgettable                        NA
6 2017-01-07 00:00:00     2 Shape of You                   13190270</code></pre>
</div>
</div>
</section>
<section id="section-19" class="level3">
<h3 class="anchored" data-anchor-id="section-19"></h3>
<p>Ahora, aplicamos funciones similares sobre el objeto <code>data_lines</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_line</span>(Reproducciones <span class="sc">~</span> Date, <span class="at">data =</span> data_lines) <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gf_facet_grid</span>( <span class="sc">~</span> Cancion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-37-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-20" class="level3">
<h3 class="anchored" data-anchor-id="section-20"></h3>
<p>O podemos poner todas las lineas en una sola gráfica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_line</span>(Reproducciones <span class="sc">~</span> Date, <span class="at">color =</span> <span class="sc">~</span>Cancion, <span class="at">data =</span> data_lines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-38-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfica-de-area" class="level3">
<h3 class="anchored" data-anchor-id="gráfica-de-area">Gráfica de area</h3>
<p>Es una forma especializada de la gráfica de líneas, donde conectamos los puntos con una línea continua y rellenamos la región debajo de esa línea con un color sólido. Se genera usando la función <code>gf_area()</code> de <strong>ggformula</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_area</span>(Reproducciones <span class="sc">~</span> Date, <span class="at">color =</span> <span class="sc">~</span>Cancion, </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="sc">~</span>Cancion, <span class="at">data =</span> data_lines)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-39-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="aplicando-el-principio-3-2" class="level3">
<h3 class="anchored" data-anchor-id="aplicando-el-principio-3-2">Aplicando el Principio 3</h3>
<p>Además de las funciones antes vistas, podemos hacer las areas trasnparentes usando el parametro <code>alpha</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_area</span>(Reproducciones <span class="sc">~</span> Date, <span class="at">color =</span> <span class="sc">~</span>Cancion, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill =</span> <span class="sc">~</span>Cancion, <span class="at">data =</span> data_lines, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-40-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="gráficas-para-cuatro-variables" class="level3">
<h3 class="anchored" data-anchor-id="gráficas-para-cuatro-variables">Gráficas para cuatro variables</h3>
<p>Una gráfica común para 4 variables es la gráfica de dispersión, donde el color y el tamaño de los símbolos dependen de dos variables <span style="color:#8B8000;"><strong>categóricas</strong></span>.</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(bill_length_mm <span class="sc">~</span> bill_depth_mm, <span class="at">size =</span> <span class="sc">~</span>island, </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="at">color =</span> <span class="sc">~</span>species, <span class="at">data =</span> penguins_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-21" class="level3">
<h3 class="anchored" data-anchor-id="section-21"></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_point</span>(bill_length_mm <span class="sc">~</span> bill_depth_mm, <span class="at">size =</span> <span class="sc">~</span>island, </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="at">color =</span> <span class="sc">~</span>species, <span class="at">data =</span> penguins_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Multivariate_files/figure-revealjs/unnamed-chunk-42-1.png" class="img-fluid figure-img" data-fig-pos="center" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="más-gráficas" class="level2">
<h2 class="anchored" data-anchor-id="más-gráficas">Más gráficas</h2>
<p><a href="https://www.mosaic-web.org/ggformula/articles/pkgdown/ggformula-long.html" class="uri">https://www.mosaic-web.org/ggformula/articles/pkgdown/ggformula-long.html</a></p>
</section>
<section id="regresar-a-página-principal" class="level2">
<h2 class="anchored" data-anchor-id="regresar-a-página-principal"><a href="https://alanrvazquez.github.io/TEC-IN2039-Website/TEC-IN2039-Website.html">Regresar a página principal</a></h2>


</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>