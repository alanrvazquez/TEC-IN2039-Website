<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alan R. V√°zquez">

<title>Variables Categ√≥ricas ‚Äì IN2039 Data Visualization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/countdown-0.4.0/countdown.css" rel="stylesheet">
<script src="../site_libs/countdown-0.4.0/countdown.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      IN2039 Data Visualization
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">IN2039 Data Visualization</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../TEC-IN2039-Website.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#agenda" id="toc-agenda" class="nav-link active" data-scroll-target="#agenda">Agenda</a></li>
  <li><a href="#primero-lo-primero" id="toc-primero-lo-primero" class="nav-link" data-scroll-target="#primero-lo-primero">Primero lo primero</a></li>
  <li><a href="#penguins-dataset" id="toc-penguins-dataset" class="nav-link" data-scroll-target="#penguins-dataset">Penguins Dataset</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"></a></li>
  <li><a href="#aseg√∫rate-que-r-sabe-que-la-variable-es-categ√≥rica" id="toc-aseg√∫rate-que-r-sabe-que-la-variable-es-categ√≥rica" class="nav-link" data-scroll-target="#aseg√∫rate-que-r-sabe-que-la-variable-es-categ√≥rica">Aseg√∫rate que R sabe que la variable es categ√≥rica</a></li>
  <li><a href="#definiendo-variables-categ√≥ricas-en-r" id="toc-definiendo-variables-categ√≥ricas-en-r" class="nav-link" data-scroll-target="#definiendo-variables-categ√≥ricas-en-r">Definiendo variables categ√≥ricas en R</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"></a></li>
  <li><a href="#res√∫menes-estad√≠sticos" id="toc-res√∫menes-estad√≠sticos" class="nav-link" data-scroll-target="#res√∫menes-estad√≠sticos">Res√∫menes Estad√≠sticos</a>
  <ul class="collapse">
  <li><a href="#res√∫menes-estad√≠sticos-1" id="toc-res√∫menes-estad√≠sticos-1" class="nav-link" data-scroll-target="#res√∫menes-estad√≠sticos-1">Res√∫menes Estad√≠sticos</a></li>
  <li><a href="#tabla-de-frecuencia" id="toc-tabla-de-frecuencia" class="nav-link" data-scroll-target="#tabla-de-frecuencia">Tabla de Frecuencia</a></li>
  <li><a href="#tabla-de-frecuencia-en-r" id="toc-tabla-de-frecuencia-en-r" class="nav-link" data-scroll-target="#tabla-de-frecuencia-en-r">Tabla de frecuencia en R</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2"></a></li>
  <li><a href="#tabla-de-frecuencia-relativa" id="toc-tabla-de-frecuencia-relativa" class="nav-link" data-scroll-target="#tabla-de-frecuencia-relativa">Tabla de Frecuencia Relativa</a></li>
  </ul></li>
  <li><a href="#gr√°fica-de-barras" id="toc-gr√°fica-de-barras" class="nav-link" data-scroll-target="#gr√°fica-de-barras">Gr√°fica de barras</a>
  <ul class="collapse">
  <li><a href="#gr√°fica-de-barras-1" id="toc-gr√°fica-de-barras-1" class="nav-link" data-scroll-target="#gr√°fica-de-barras-1">Gr√°fica de Barras</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3"></a></li>
  <li><a href="#ejemplo-mejorando-la-gr√°fica" id="toc-ejemplo-mejorando-la-gr√°fica" class="nav-link" data-scroll-target="#ejemplo-mejorando-la-gr√°fica">Ejemplo: Mejorando la gr√°fica</a></li>
  </ul></li>
  <li><a href="#gr√°fica-circular" id="toc-gr√°fica-circular" class="nav-link" data-scroll-target="#gr√°fica-circular">Gr√°fica circular</a>
  <ul class="collapse">
  <li><a href="#gr√°fica-circular-o-de-pastel" id="toc-gr√°fica-circular-o-de-pastel" class="nav-link" data-scroll-target="#gr√°fica-circular-o-de-pastel">Gr√°fica circular o de pastel</a></li>
  <li><a href="#actividad-solo-mode" id="toc-actividad-solo-mode" class="nav-link" data-scroll-target="#actividad-solo-mode">Actividad (<em>solo</em> mode)</a></li>
  </ul></li>
  <li><a href="#transformando-variables-categ√≥ricas" id="toc-transformando-variables-categ√≥ricas" class="nav-link" data-scroll-target="#transformando-variables-categ√≥ricas">Transformando variables categ√≥ricas</a>
  <ul class="collapse">
  <li><a href="#aplica-el-principio-3" id="toc-aplica-el-principio-3" class="nav-link" data-scroll-target="#aplica-el-principio-3">Aplica el Principio 3</a></li>
  <li><a href="#ejemplo-boston-housing-dataset" id="toc-ejemplo-boston-housing-dataset" class="nav-link" data-scroll-target="#ejemplo-boston-housing-dataset">Ejemplo: Boston Housing Dataset</a></li>
  <li><a href="#section-4" id="toc-section-4" class="nav-link" data-scroll-target="#section-4"></a></li>
  <li><a href="#section-5" id="toc-section-5" class="nav-link" data-scroll-target="#section-5"></a></li>
  <li><a href="#recuerda" id="toc-recuerda" class="nav-link" data-scroll-target="#recuerda">Recuerda‚Ä¶</a></li>
  <li><a href="#gr√°fica-inicial" id="toc-gr√°fica-inicial" class="nav-link" data-scroll-target="#gr√°fica-inicial">Gr√°fica inicial</a></li>
  <li><a href="#re-etiquetado-categor√≠as" id="toc-re-etiquetado-categor√≠as" class="nav-link" data-scroll-target="#re-etiquetado-categor√≠as">Re-etiquetado categor√≠as</a></li>
  <li><a href="#section-6" id="toc-section-6" class="nav-link" data-scroll-target="#section-6"></a></li>
  <li><a href="#veamos-que-sucede-ahora." id="toc-veamos-que-sucede-ahora." class="nav-link" data-scroll-target="#veamos-que-sucede-ahora.">Veamos que sucede ahora.</a></li>
  <li><a href="#re-ordenar-categor√≠as" id="toc-re-ordenar-categor√≠as" class="nav-link" data-scroll-target="#re-ordenar-categor√≠as">Re-ordenar categor√≠as</a></li>
  <li><a href="#section-7" id="toc-section-7" class="nav-link" data-scroll-target="#section-7"></a></li>
  <li><a href="#colapsando-categor√≠as" id="toc-colapsando-categor√≠as" class="nav-link" data-scroll-target="#colapsando-categor√≠as">Colapsando categor√≠as</a></li>
  <li><a href="#section-8" id="toc-section-8" class="nav-link" data-scroll-target="#section-8"></a></li>
  <li><a href="#section-9" id="toc-section-9" class="nav-link" data-scroll-target="#section-9"></a></li>
  <li><a href="#guardando-gr√°ficas-en-ggplot2" id="toc-guardando-gr√°ficas-en-ggplot2" class="nav-link" data-scroll-target="#guardando-gr√°ficas-en-ggplot2">Guardando gr√°ficas en ggplot2</a></li>
  </ul></li>
  <li><a href="#regresar-a-p√°gina-principal" id="toc-regresar-a-p√°gina-principal" class="nav-link" data-scroll-target="#regresar-a-p√°gina-principal">Regresar a p√°gina principal</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Slides_Categorical.slides.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Variables Categ√≥ricas</h1>
<p class="subtitle lead">IN2039: Visualizaci√≥n de Datos</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Alan R. V√°zquez </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Departamento de Ingenier√≠a Industrial
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>


<section id="agenda" class="level3">
<h3 class="anchored" data-anchor-id="agenda">Agenda</h3>
<p><span style="color:darkgreen;"><em>Enfocarnos en 1 variable categ√≥rica.</em></span></p>
<p><br></p>
<ol type="1">
<li><p>Introducci√≥n</p></li>
<li><p>Res√∫menes estad√≠sticos</p></li>
<li><p>Gr√°fica de barras</p></li>
<li><p>Gr√°fica circular y Actividad</p></li>
<li><p>Transformando variables categ√≥ricas</p></li>
</ol>
</section>
<section id="primero-lo-primero" class="level3">
<h3 class="anchored" data-anchor-id="primero-lo-primero">Primero lo primero</h3>
<p>Hoy usaremos R para construir gr√°ficas y tablas. Para esto, usaremos las librer√≠as que ya vimos antes como <code>readxl</code>, <code>ggplot2</code>, <code>ggformula</code>, y <code>dplyr</code>.</p>
<p><br></p>
<p>Cargu√©moslas en R antes de comenzar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nos se te olvide instalar la librer√≠a "ggformula" en Google Colab.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(ggformula)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggformula)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="penguins-dataset" class="level3">
<h3 class="anchored" data-anchor-id="penguins-dataset">Penguins Dataset</h3>
<p>Ilustraremos los conceptos de hoy usando el conjunto de datos <code>penguins.xlsx</code>.</p>
<div class="columns">
<div class="column" style="width:68%;">
<p>S√∫belo a Google Colab y c√°rgalo en R usando el siguiente c√≥digo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">"penguins.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:32%;">
<div class="quarto-figure quarto-figure-right">
<figure class="figure">
<p><img src="images/clipboard-1776523589.png" class="img-fluid quarto-figure quarto-figure-right figure-img" width="561"></p>
</figure>
</div>
</div>
</div>
<p>En Google Colab, el archivo debe de estar en la carpeta llamada ‚Äúcontent‚Äù o ‚Äúcontenido.‚Äù</p>
</section>
<section id="section" class="level3">
<h3 class="anchored" data-anchor-id="section"></h3>
<p>Hoy nos enfocaremos en visualizar las variables categ√≥ricas: <code>species</code>, <code>island</code> y <code>sex</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, sex) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  species island    sex   
  &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; 
1 Adelie  Torgersen male  
2 Adelie  Torgersen female
3 Adelie  Torgersen female
4 Adelie  Torgersen &lt;NA&gt;  
5 Adelie  Torgersen female
6 Adelie  Torgersen male  </code></pre>
</div>
</div>
</section>
<section id="aseg√∫rate-que-r-sabe-que-la-variable-es-categ√≥rica" class="level3">
<h3 class="anchored" data-anchor-id="aseg√∫rate-que-r-sabe-que-la-variable-es-categ√≥rica">Aseg√∫rate que R sabe que la variable es categ√≥rica</h3>
<p>A pesar de que la variables <code>species</code>, <code>island</code> y <code>sex</code> son claramente categ√≥ricas, R no reconoce esto.</p>
<p>Por default, R determina que esas variables son car√°cter o <code>chr</code> porque est√°n compuestas por texto.</p>
<blockquote class="blockquote">
<p>En R, las variables categ√≥ricas se conocen como <code>factor</code> o <code>fct</code>.</p>
</blockquote>
</section>
<section id="definiendo-variables-categ√≥ricas-en-r" class="level3">
<h3 class="anchored" data-anchor-id="definiendo-variables-categ√≥ricas-en-r">Definiendo variables categ√≥ricas en R</h3>
<p>Para asegurarnos que R sepa que la variable es categ√≥rica o <code>fct</code>, usamos la funci√≥n <code>mutate_at()</code> de <code>dplyr</code>:</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="ot">=</span> penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"species"</span>, <span class="st">"island"</span>, <span class="st">"sex"</span>), as.factor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>Nota que acabamos de reemplazar el objeto <code>penguins_data</code> con su nueva versi√≥n.</p>
</section>
<section id="section-1" class="level3">
<h3 class="anchored" data-anchor-id="section-1"></h3>
<p>Ahora, las etiquetas de las variables son <code>fct</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, sex) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  species island    sex   
  &lt;fct&gt;   &lt;fct&gt;     &lt;fct&gt; 
1 Adelie  Torgersen male  
2 Adelie  Torgersen female
3 Adelie  Torgersen female
4 Adelie  Torgersen &lt;NA&gt;  
5 Adelie  Torgersen female
6 Adelie  Torgersen male  </code></pre>
</div>
</div>
</section>
<section id="res√∫menes-estad√≠sticos" class="level2">
<h2 class="anchored" data-anchor-id="res√∫menes-estad√≠sticos">Res√∫menes Estad√≠sticos</h2>
<section id="res√∫menes-estad√≠sticos-1" class="level3">
<h3 class="anchored" data-anchor-id="res√∫menes-estad√≠sticos-1">Res√∫menes Estad√≠sticos</h3>
<blockquote class="blockquote">
<p>Un <strong>resumen estad√≠stico</strong> nos ayuda a resumir un conjunto de observaciones de una manera simple.</p>
</blockquote>
<p>. . .</p>
<p>Los res√∫menes estad√≠sticos m√°s utilizados para datos categ√≥ricos son:</p>
<div class="incremental">
<ul class="incremental">
<li><p>La <span style="color:darkblue;"><strong>frecuencia</strong></span> de una categor√≠a es el n√∫mero de observaciones que pertenecen a esa categor√≠a.</p></li>
<li><p>La <span style="color:darkblue;"><strong>frecuencia relativa</strong></span> es la frecuencia dividida por el n√∫mero total de observaciones.</p></li>
</ul>
</div>
</section>
<section id="tabla-de-frecuencia" class="level3">
<h3 class="anchored" data-anchor-id="tabla-de-frecuencia">Tabla de Frecuencia</h3>
<p>Resume una variable categ√≥rica contando los valores por categor√≠a.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Especie</strong></th>
<th><strong>Frecuencia</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Adelie</td>
<td>152</td>
</tr>
<tr class="even">
<td>Chinstrap</td>
<td>68</td>
</tr>
<tr class="odd">
<td>Gentoo</td>
<td>124</td>
</tr>
<tr class="even">
<td><strong>Total</strong></td>
<td><strong>344</strong></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>Frecuencia</strong>: N√∫mero de observaciones en cada categor√≠a.</p></li>
<li><p><strong>Total</strong>: Suma total de observaciones.</p></li>
</ul>
<div class="notes">
<ol type="1">
<li><p>Ventajas de las frequencias.</p></li>
<li><p>Resumen claro y conciso de los datos categ√≥ricos.</p></li>
<li><p>Facilita la identificaci√≥n de patrones y tendencias.</p></li>
<li><p>Ayuda en la toma de decisiones informadas.</p></li>
</ol>
</div>
</section>
<section id="tabla-de-frecuencia-en-r" class="level3">
<h3 class="anchored" data-anchor-id="tabla-de-frecuencia-en-r">Tabla de frecuencia en R</h3>
<p>Para construir una tabla de frecuencia en <strong>dplyr</strong>, usamos las funciones <code>group_by()</code>, <code>summarise()</code>, y <code>n()</code>.</p>
<p>La funci√≥n <code>group_by()</code> toma una tabla existente y la convierte en una tabla agrupada donde las operaciones se realizan ‚Äúpor grupo‚Äù.</p>
<p>La funci√≥n <code>n()</code> cuenta los valores de una categor√≠a.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">"Frecuencia"</span> <span class="ot">=</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-2" class="level3">
<h3 class="anchored" data-anchor-id="section-2"></h3>
<p>El c√≥digo se lee:</p>
<blockquote class="blockquote">
<p>Del objeto <code>penguins_data</code>, agrupa los datos por la variable <code>species</code>, y resume los datos usando el n√∫mero de elementos por categor√≠a (<code>n()</code>).</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">"Frecuencia"</span> <span class="ot">=</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 2
  species   Frecuencia
  &lt;fct&gt;          &lt;int&gt;
1 Adelie           152
2 Chinstrap         68
3 Gentoo           124</code></pre>
</div>
</div>
</section>
<section id="tabla-de-frecuencia-relativa" class="level3">
<h3 class="anchored" data-anchor-id="tabla-de-frecuencia-relativa">Tabla de Frecuencia Relativa</h3>
<p>Resume una variable categ√≥rica calculando la <em>proporci√≥n de valores</em> por categor√≠a.</p>
<div class="columns">
<div class="column" style="width:40%;">
<table class="caption-top table">
<thead>
<tr class="header">
<th><strong>Especie</strong></th>
<th><strong>Frecuencia relativa</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Adelie</td>
<td>0.442</td>
</tr>
<tr class="even">
<td>Chinstrap</td>
<td>0.198</td>
</tr>
<tr class="odd">
<td>Gentoo</td>
<td>0.360</td>
</tr>
<tr class="even">
<td><strong>Suma</strong></td>
<td><strong>1</strong></td>
</tr>
</tbody>
</table>
</div><div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>penguins_data <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">"Frecuencia"</span> <span class="ot">=</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">"Freq.Rel"</span> <span class="ot">=</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>           Frecuencia<span class="sc">/</span><span class="fu">sum</span>(Frecuencia))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  species   Frecuencia Freq.Rel
  &lt;fct&gt;          &lt;int&gt;    &lt;dbl&gt;
1 Adelie           152    0.442
2 Chinstrap         68    0.198
3 Gentoo           124    0.360</code></pre>
</div>
</div>
</div>
</div>
<div style="font-size: 85%;">
<ul>
<li><strong>Frecuencia relativa</strong>: N√∫mero de observaciones en cada categor√≠a dividida por el total.</li>
</ul>
</div>
<div class="notes">
<p>La ventaja de la frequencia relativa es que se puede interpretar como una probabilidad. Lo que da mas informaci√≥n.</p>
</div>
</section>
</section>
<section id="gr√°fica-de-barras" class="level2">
<h2 class="anchored" data-anchor-id="gr√°fica-de-barras">Gr√°fica de barras</h2>
<section id="gr√°fica-de-barras-1" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fica-de-barras-1">Gr√°fica de Barras</h3>
<blockquote class="blockquote">
<p>Representa visualmente una tabla de frecuencias o frecuencias relativas.</p>
</blockquote>
<p>La frecuencia (o frecuencia relativa) se representa por una barra de altura proporcional.</p>
<p>. . .</p>
<p>Puedes construir una gr√°fica de barras usando la funci√≥n <code>gf_bar()</code> as√≠:</p>
<div class="cell" data-layout-align="center" data-output-location="slide">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_bar</span>( <span class="sc">~</span> species, <span class="at">data =</span> penguins_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-3" class="level3">
<h3 class="anchored" data-anchor-id="section-3"></h3>
<p>Si quieres graficar la frecuencia relativa, usa la funci√≥n <code>gf_percents</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> species, <span class="at">data =</span> penguins_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ejemplo-mejorando-la-gr√°fica" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-mejorando-la-gr√°fica">Ejemplo: Mejorando la gr√°fica</h3>
<p>Usando las herramientas para gr√°ficos en ggplot, podemos mejorar el c√≥digo anterior para que la gr√°fica se vea as√≠.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="gr√°fica-circular" class="level2">
<h2 class="anchored" data-anchor-id="gr√°fica-circular">Gr√°fica circular</h2>
<section id="gr√°fica-circular-o-de-pastel" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fica-circular-o-de-pastel">Gr√°fica circular o de pastel</h3>
<div class="columns">
<div class="column" style="width:50%;">
<div class="incremental">
<ul class="incremental">
<li><p>Se construye dividiendo un c√≠rculo en varias porciones que representan las categor√≠as de la variable.</p></li>
<li><p>El di√°metro del c√≠rculo comprendido por una categor√≠a es su frecuencia relativa.</p></li>
<li><p>Permite dar un vistazo r√°pido a las proporciones de cada categor√≠a.</p></li>
</ul>
</div>
</div><div class="column" style="width:50%;">
<p><img src="images/clipboard-800609446.png" class="img-fluid"></p>
</div>
</div>
<div class="notes">
<p>Pie charts versus bar charts.</p>
<p><strong>Bar charts can serve as a good way to show comparisons between categories</strong>. It is generally observed that new trends tend to shy away from using pie charts, as it is difficult for the human eye to judge the exact angle that shows the value of a category in a pie chart.</p>
</div>
</section>
<section id="actividad-solo-mode" class="level3">
<h3 class="anchored" data-anchor-id="actividad-solo-mode">Actividad (<em>solo</em> mode)</h3>
<p><span style="color:darkgreen;">Preguntale a ChatGPT</span></p>
<ol type="1">
<li>Ve ChatGPT en <a href="https://chat.openai.com/" class="uri">https://chat.openai.com/</a></li>
<li>Pidele a ChatGPT que te muestre como generar una gr√°fica de circular (o de <em>pastel</em>) usando <strong>ggplot2</strong> y <strong>ggformula</strong> en R.</li>
<li>Adapta tu c√≥digo para producir una gr√°fica circular de la variable <code>island</code> en <code>penguin_data</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>countdown<span class="sc">::</span><span class="fu">countdown</span>(<span class="at">minutes =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="countdown" id="timer_d7c54088" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">20</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
</section>
<section id="transformando-variables-categ√≥ricas" class="level2">
<h2 class="anchored" data-anchor-id="transformando-variables-categ√≥ricas">Transformando variables categ√≥ricas</h2>
<section id="aplica-el-principio-3" class="level3">
<h3 class="anchored" data-anchor-id="aplica-el-principio-3">Aplica el Principio 3</h3>
<blockquote class="blockquote">
<p><em>Aplica los principios del dise√±o gr√°fico.</em></p>
</blockquote>
<p>. . .</p>
<p>Podemos mejorar gr√°ficas de variables categ√≥ricas usando estas t√©cnicas:</p>
<div class="incremental">
<ul class="incremental">
<li><p>Re-etiquetar las categor√≠as para que sean m√°s informativas.</p></li>
<li><p>Re-ordenar las categor√≠as para que sigan su orden natural.</p></li>
<li><p>Colapsar categor√≠as para simplificar la gr√°fica.</p></li>
</ul>
</div>
</section>
<section id="ejemplo-boston-housing-dataset" class="level3">
<h3 class="anchored" data-anchor-id="ejemplo-boston-housing-dataset">Ejemplo: Boston Housing Dataset</h3>
<p>Este conjunto de datos contiene informaci√≥n recopilada por el Servicio del Censo de EE. UU. sobre viviendas en el √°rea de Boston, Massachusetts.</p>
<div class="columns">
<div class="column" style="width:60%;">
<p><img src="images/boston_dataset.png" class="img-fluid"></p>
</div><div class="column" style="width:40%;">
<p><img src="images/clipboard-3653087831.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="section-4" class="level3">
<h3 class="anchored" data-anchor-id="section-4"></h3>
<p>Los datos est√°n en <code>Boston_dataset.xlsx</code>. S√∫belos a Google Colab y c√°rgalos en R usando el siguiente comando.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">"Boston_dataset.xlsx"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 14
     crim    zn indus  chas   nox    rm   age   dis rad     tax ptratio black
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 0.00632    18  2.31     0 0.538  6.58  65.2  4.09 Low     296    15.3  397.
2 0.0273      0  7.07     0 0.469  6.42  78.9  4.97 Low     242    17.8  397.
3 0.0273      0  7.07     0 0.469  7.18  61.1  4.97 Low     242    17.8  393.
4 0.0324      0  2.18     0 0.458  7.00  45.8  6.06 Low     222    18.7  395.
5 0.0690      0  2.18     0 0.458  7.15  54.2  6.06 Low     222    18.7  397.
6 0.0298      0  2.18     0 0.458  6.43  58.7  6.06 Low     222    18.7  394.
# ‚Ñπ 2 more variables: lstat &lt;dbl&gt;, medv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-5" class="level3">
<h3 class="anchored" data-anchor-id="section-5"></h3>
<p>Nos concentraremos en las siguientes variables:</p>
<ul>
<li><p><code>chas</code> : Si la casa limita con el r√≠o Charles (1: Si y 0: No)</p></li>
<li><p><code>rad</code> : Indice de accesibilidad a carreteras radiales (<code>Low</code>, <code>Medium</code>, <code>High</code>).</p></li>
</ul>
</section>
<section id="recuerda" class="level3">
<h3 class="anchored" data-anchor-id="recuerda">Recuerda‚Ä¶</h3>
<p>Aseg√∫rate de que R sabe que esas variables son categ√≥ricas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="ot">=</span> Boston_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">c</span>(<span class="st">"chas"</span>, <span class="st">"rad"</span>), as.factor)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="sc">%&gt;%</span> <span class="fu">select</span>(chas, rad) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 2
  chas  rad  
  &lt;fct&gt; &lt;fct&gt;
1 0     Low  
2 0     Low  
3 0     Low  
4 0     Low  
5 0     Low  
6 0     Low  </code></pre>
</div>
</div>
</section>
<section id="gr√°fica-inicial" class="level3">
<h3 class="anchored" data-anchor-id="gr√°fica-inicial">Gr√°fica inicial</h3>
<p>Vamos a construir una gr√°fica de barras de <code>chas</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> chas, <span class="at">data =</span> Boston_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" data-fig-pos="center" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Sin embargo, las categor√≠as en la gr√°fica no son informativas.</p>
</section>
<section id="re-etiquetado-categor√≠as" class="level3">
<h3 class="anchored" data-anchor-id="re-etiquetado-categor√≠as">Re-etiquetado categor√≠as</h3>
<p>Lo mejor es re-nombrar las categor√≠as de la variable <code>chas</code> para que la gr√°fica de barras de mas informaci√≥n al usuario.</p>
<ol type="1">
<li>Verifica los nombres de las categor√≠as en la variable usando la funci√≥n <code>unique()</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="sc">%&gt;%</span> <span class="fu">select</span>(chas) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 1
  chas 
  &lt;fct&gt;
1 0    
2 1    </code></pre>
</div>
</div>
</section>
<section id="section-6" class="level3">
<h3 class="anchored" data-anchor-id="section-6"></h3>
<ol start="2" type="1">
<li>Re-emplaza por nombres apropiados usando las funciones <code>mutate()</code> y <code>case_match()</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="ot">=</span> Boston_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">chas =</span> <span class="fu">case_match</span>(chas, <span class="st">"0"</span> <span class="sc">~</span> <span class="st">"No"</span>, <span class="st">"1"</span> <span class="sc">~</span> <span class="st">"Si"</span>))</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="sc">%&gt;%</span> <span class="fu">select</span>(crim, zn, indus, chas) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
     crim    zn indus chas 
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1 0.00632    18  2.31 No   
2 0.0273      0  7.07 No   
3 0.0273      0  7.07 No   
4 0.0324      0  2.18 No   
5 0.0690      0  2.18 No   
6 0.0298      0  2.18 No   </code></pre>
</div>
</div>
</section>
<section id="veamos-que-sucede-ahora." class="level3">
<h3 class="anchored" data-anchor-id="veamos-que-sucede-ahora.">Veamos que sucede ahora.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> chas, <span class="at">data =</span> Boston_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" data-fig-pos="center" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mucho mejor üòÉ</p>
</section>
<section id="re-ordenar-categor√≠as" class="level3">
<h3 class="anchored" data-anchor-id="re-ordenar-categor√≠as">Re-ordenar categor√≠as</h3>
<p>Ahora, construyamos una gr√°fica de barras de <code>rad</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> rad, <span class="at">data =</span> Boston_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" data-fig-pos="center" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Las categor√≠as no siguen un orden natural de izquierda a derecha: <code>Low</code>, <code>Medium</code>, y <code>High</code>.</p>
</section>
<section id="section-7" class="level3">
<h3 class="anchored" data-anchor-id="section-7"></h3>
<p>Para tener el orden de las categor√≠as deseado, debemos de ser m√°s expl√≠citos al definir la variable categ√≥rica en R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="ot">=</span> Boston_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">rad =</span> <span class="fu">factor</span>(rad, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span>)))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> rad, <span class="at">data =</span> Boston_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" data-fig-pos="center" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Mucho mejor üòÉ</p>
</section>
<section id="colapsando-categor√≠as" class="level3">
<h3 class="anchored" data-anchor-id="colapsando-categor√≠as">Colapsando categor√≠as</h3>
<p>Algunas variables categ√≥ricas tienden a tener muchas categor√≠as. Por ejemplo, los estados de un pais o c√≥digos postales. En estos casos, puede ser dif√≠cil visualizar de todas las categ√≥rias en una sola gr√°fica.</p>
<p>Una estrategia para desarrollar una visualizaci√≥n efectiva es colapsar categor√≠as.</p>
<p>Por ejemplo, en la variable <code>rad</code>, podemos collapsar las categor√≠as <code>Medium</code> y <code>High</code> en una sola categor√≠a llamada <code>Other</code>.</p>
</section>
<section id="section-8" class="level3">
<h3 class="anchored" data-anchor-id="section-8"></h3>
<p>Para colapsar categor√≠as en <strong>dplyr</strong>, usamos la funci√≥n <code>case_when()</code> junto con <code>mutate()</code>. La funci√≥n <code>case_when()</code> permite remplazar categor√≠as usando expreciones l√≥gicas en variables espec√≠ficas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">rad =</span> <span class="fu">case_when</span>(rad <span class="sc">!=</span> <span class="st">"Low"</span> <span class="sc">~</span> <span class="st">"Other"</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>                             rad <span class="sc">==</span> <span class="st">"Low"</span> <span class="sc">~</span> <span class="st">"Low"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 14
     crim    zn indus chas    nox    rm   age   dis rad     tax ptratio black
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 0.00632    18  2.31 No    0.538  6.58  65.2  4.09 Low     296    15.3  397.
2 0.0273      0  7.07 No    0.469  6.42  78.9  4.97 Low     242    17.8  397.
3 0.0273      0  7.07 No    0.469  7.18  61.1  4.97 Low     242    17.8  393.
4 0.0324      0  2.18 No    0.458  7.00  45.8  6.06 Low     222    18.7  395.
5 0.0690      0  2.18 No    0.458  7.15  54.2  6.06 Low     222    18.7  397.
6 0.0298      0  2.18 No    0.458  6.43  58.7  6.06 Low     222    18.7  394.
# ‚Ñπ 2 more variables: lstat &lt;dbl&gt;, medv &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="section-9" class="level3">
<h3 class="anchored" data-anchor-id="section-9"></h3>
<p>El colapsamiento de categor√≠as simplifica nuestra gr√°fica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Boston_dataset_simple <span class="ot">=</span> Boston_dataset <span class="sc">%&gt;%</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">rad =</span> <span class="fu">case_when</span>(rad <span class="sc">!=</span> <span class="st">"Low"</span> <span class="sc">~</span> <span class="st">"Other"</span>,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>                             rad <span class="sc">==</span> <span class="st">"Low"</span> <span class="sc">~</span> <span class="st">"Low"</span>))</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">gf_percents</span>( <span class="sc">~</span> rad, <span class="at">data =</span> Boston_dataset_simple)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Slides_Categorical_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" data-fig-pos="center" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Tambi√©n, nos permite enfatizar alguna categor√≠a como <code>Low</code> y ver se compara con las otras categor√≠as (como un todo).</p>
</section>
<section id="guardando-gr√°ficas-en-ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="guardando-gr√°ficas-en-ggplot2">Guardando gr√°ficas en ggplot2</h3>
<p>Para guardar una gr√°fica de ggplot2, primero guardamos la gr√°fica en un objeto de R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mi_grafica_de_barras <span class="ot">=</span> <span class="fu">gf_percents</span>( <span class="sc">~</span> rad, <span class="at">data =</span> Boston_dataset)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Luego, usamos la funci√≥n <code>ggsave()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"Mi_grafica.jpg"</span>, <span class="at">plot =</span> mi_grafica_de_barras, </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="cn">NA</span>, <span class="at">height =</span> <span class="cn">NA</span>, <span class="at">units =</span> <span class="st">"cm"</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 17.8 x 12.7 cm image</code></pre>
</div>
</div>
<p>Algunos de los argumentos arriba son:</p>
<div style="font-size: 85%;">
<ul>
<li><code>width</code>: ancho del gr√°fico.</li>
<li><code>height</code>: altura del gr√°fico.</li>
<li><code>units</code>: unidades de medici√≥n.</li>
<li><code>dpi</code>: resoluci√≥n del gr√°fico.</li>
</ul>
</div>
</section>
</section>
<section id="regresar-a-p√°gina-principal" class="level2">
<h2 class="anchored" data-anchor-id="regresar-a-p√°gina-principal"><a href="https://alanrvazquez.github.io/TEC-IN2039-Website/TEC-IN2039-Website.html">Regresar a p√°gina principal</a></h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>